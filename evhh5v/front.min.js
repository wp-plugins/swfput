var evhh5v_getstyle=function(el,sty){var v=0;if(document.defaultView&&document.defaultView.getComputedStyle){v=document.defaultView.getComputedStyle(el,"").getPropertyValue(sty);}else if(el.currentStyle){sty=sty.replace(/\-(\w)/g,function(m1,p1){return p1.toUpperCase();});v=el.currentStyle[sty];}
return v;};function evhh5v_need_svg_query(){if(document.evhh5v_need_svg_query_bool!==undefined){return document.evhh5v_need_svg_query_bool;}
document.evhh5v_need_svg_query_bool=(!/(FireFox|WebKit|KHTML|Chrom[ie]|Safari|OPR\/|Opera)/i.test(navigator["userAgent"]))==false;return document.evhh5v_need_svg_query_bool;};function evhh5v_ua_is_mobile(){if(document.evhh5v_ua_is_mobile_bool!==undefined){return document.evhh5v_ua_is_mobile_bool;}
document.evhh5v_ua_is_mobile_bool=false;var ua=navigator["userAgent"];if(ua.indexOf('Mobile')>=0||ua.indexOf('Android')>=0||ua.indexOf('Silk/')>=0||ua.indexOf('Kindle')>=0||ua.indexOf('BlackBerry')>=0||ua.indexOf('Opera Mini')>=0||ua.indexOf('Opera Mobi')>=0){document.evhh5v_ua_is_mobile_bool=true;}
return document.evhh5v_ua_is_mobile_bool;};function evhh5v_fixup_elements(parms){var ip=parms["iparm"];if(/Opera/i.test(navigator["userAgent"])){var t=document.getElementById(ip["auxdiv"]);if(t&&t.parentNode&&t.parentNode.nodeName.toLowerCase()==="object"){var p=t.parentNode;var d=p.parentNode;p.removeChild(t);d.replaceChild(t,p);}}}
function evhh5v_controlbar_elements(parms,fixups){var ip=parms["iparm"];var num=ip["uniq"];var ivid=ip["vidid"];var vidobj=document.getElementById(ivid);if(!vidobj){return;}
vidobj.removeAttribute("controls");var pdefs={"parentdiv":ip["parentdiv"],"auxdiv":ip["auxdiv"],"id":ip["id"]?ip["id"]:"evhh5v_ctlbar_svg_"+num,"ctlbardiv":ip["bardivid"]?ip["bardivid"]:"evhh5v_ctlbar_div_"+num,"parent":ip["barobjid"]?ip["barobjid"]:"evhh5v_ctlbar_obj_"+num,"role":ip["role"]?ip["role"]:"bar"};var op=parms["oparm"];if(!op["uniq"]){op["uniq"]={};}
for(var k in pdefs){if(k in op["uniq"])
continue;op["uniq"][k]=pdefs[k];}
var url=ip["barurl"];var pdiv=op["uniq"]["parentdiv"];var adiv=op["uniq"]["auxdiv"];var bardiv=document.createElement('div');bardiv.setAttribute('id',op["uniq"]["ctlbardiv"]);bardiv.setAttribute('class',ip["divclass"]);bardiv.style.width=""+ip["width"]+"px";var barobj=document.createElement('object');barobj.setAttribute('id',op["uniq"]["parent"]);barobj.setAttribute('class',ip["divclass"]);var p,v,sep,q="";sep="?";for(var i in op){for(var k in op[i]){v=""+op[i][k];q+=sep+k+"="+v;p=document.createElement('param');p.setAttribute('name',k);p.setAttribute('value',v);barobj.appendChild(p);sep="&";}}
barobj.style.width=""+ip["width"]+"px";barobj.style.height=""+ip["barheight"]+"px";barobj.setAttribute("onload","evhh5v_ctlbarload(this, '"+pdiv+"'); false;");barobj.setAttribute('type',"image/svg+xml");barobj.setAttribute("data",url+(evhh5v_need_svg_query()?"":q));p=document.createElement('p');p.innerHTML=ip["altmsg"];barobj.appendChild(p);bardiv.appendChild(barobj);var alldiv=document.getElementById(adiv);url=ip["buturl"];var butdiv;butdiv=document.createElement('div');butdiv.setAttribute('id',"b_"+op["uniq"]["ctlbardiv"]);butdiv.setAttribute('class',ip["divclass"]);barobj=document.createElement('object');barobj.setAttribute('id',"b_"+op["uniq"]["parent"]);barobj.setAttribute('class',ip["divclass"]);q="?"+"parentdiv="+pdiv;p=document.createElement('param');p.setAttribute('name',"parentdiv");p.setAttribute('value',pdiv);barobj.appendChild(p);q+="&"+"parent="+"b_"+op["uniq"]["parent"];p=document.createElement('param');p.setAttribute('name',"parent");p.setAttribute('value',"b_"+op["uniq"]["parent"]);barobj.appendChild(p);q+="&"+"ctlbardiv="+"b_"+op["uniq"]["ctlbardiv"];p=document.createElement('param');p.setAttribute('name',"ctlbardiv");p.setAttribute('value',"b_"+op["uniq"]["ctlbardiv"]);barobj.appendChild(p);q+="&"+"role=1st";p=document.createElement('param');p.setAttribute('name',"role");p.setAttribute('value',"1st");barobj.appendChild(p);barobj.setAttribute("onload","evhh5v_ctlbutload(this, '"+pdiv+"'); false;");barobj.setAttribute('type',"image/svg+xml");barobj.setAttribute("data",url+(evhh5v_need_svg_query()?"":q));butdiv.appendChild(barobj);url=ip["volurl"];var voldiv;voldiv=document.createElement('div');voldiv.setAttribute('id',"v_"+op["uniq"]["ctlbardiv"]);voldiv.setAttribute('class',ip["divclass"]);barobj=document.createElement('object');barobj.setAttribute('id',"v_"+op["uniq"]["parent"]);barobj.setAttribute('class',ip["divclass"]);q="?"+"parentdiv="+pdiv;p=document.createElement('param');p.setAttribute('name',"parentdiv");p.setAttribute('value',pdiv);barobj.appendChild(p);q+="&"+"parent="+"v_"+op["uniq"]["parent"];p=document.createElement('param');p.setAttribute('name',"parent");p.setAttribute('value',"v_"+op["uniq"]["parent"]);barobj.appendChild(p);q+="&"+"ctlbardiv="+"v_"+op["uniq"]["ctlbardiv"];p=document.createElement('param');p.setAttribute('name',"ctlbardiv");p.setAttribute('value',"v_"+op["uniq"]["ctlbardiv"]);barobj.appendChild(p);q+="&"+"role=vol";p=document.createElement('param');p.setAttribute('name',"role");p.setAttribute('value',"vol");barobj.appendChild(p);barobj.setAttribute("onload","evhh5v_ctlvolload(this, '"+pdiv+"'); false;");barobj.setAttribute('type',"image/svg+xml");barobj.setAttribute("data",url+(evhh5v_need_svg_query()?"":q));voldiv.appendChild(barobj);alldiv.appendChild(voldiv);alldiv.appendChild(bardiv);alldiv.appendChild(butdiv);if(fixups!==undefined&&fixups==true){evhh5v_fixup_elements(parms);}};var evhh5v_sizer_instances=[];var evhh5v_sizer_event_relay=function(load){for(var i=0;i<evhh5v_sizer_instances.length;i++){if(evhh5v_ctlbarmap!=undefined&&evhh5v_sizer_instances[i].ctlbar==undefined){var did=evhh5v_sizer_instances[i].d;if(did){did=evhh5v_ctlbarmap[did.id];if(did&&did["loaded"]){evhh5v_sizer_instances[i].add_ctlbar(did);}}}
if(load){evhh5v_sizer_instances[i].resize();}
evhh5v_sizer_instances[i].handle_resize();}};if(window.addEventListener){var f=function(e){evhh5v_sizer_event_relay(e.type=="load"?true:false);};document.addEventListener("load",f,true);window.addEventListener("load",f,true);window.addEventListener("resize",f,true);}else{evhh5v_video_onlddpre=document.onload;evhh5v_video_onldwpre=window.onload;evhh5v_video_onszwpre=window.onresize;document.onload=function(){if(typeof evhh5v_video_onlddpre==='function'){evhh5v_video_onlddpre();}
evhh5v_sizer_event_relay(true);};window.onload=function(){if(typeof evhh5v_video_onldwpre==='function'){evhh5v_video_onldwpre();}
evhh5v_sizer_event_relay(true);};window.onresize=function(){if(typeof evhh5v_video_onszwpre==='function'){evhh5v_video_onszwpre();}
evhh5v_sizer_event_relay(false);};}
var evhh5v_sizer=function(dv,ob,av,ai,bld){this.ia_rat=1;this.pad=0;this.wdiv=null;this.bld=null;this.inresize=0;if(bld){this.bld=bld;this.d=bld.d;this.o=bld.o;this.va_o=bld.va_o;this.ia_o=bld.ia_o;this.pad=bld.pad;this.wdiv=bld.wdiv;}else{this.d=document.getElementById(dv);if(this.d){this.o=document.getElementById(ob);this.va_o=document.getElementById(av);this.ia_o=document.getElementById(ai);var p=this._style(this.d,"padding-left");if(p)
this.pad=Math.max(this.pad,parseInt(p));this.wdiv=this.d.offsetWidth;}}
if(this.d){if(this.ia_o&&this.ia_o.width>1){this.ia_rat=this.ia_o.width/this.ia_o.height;}
if(this.d.style==undefined||this.d.style.maxWidth==undefined||this.d.style.maxWidth=="none"||this.d.style.maxWidth==""){this.d.style.maxWidth="100%";}
evhh5v_sizer_instances.push(this);}};evhh5v_sizer.prototype={add_ctlbar:function(bar){if(this.va_o instanceof evhh5v_controller){return;}
if(!bar){console.log("BAD CTLBAR == "+bar);return;}
this.ctlbar=bar;this.va_o=new evhh5v_controller(this.va_o,bar,0);this.va_o.mk();},_style:function(el,sty){return evhh5v_getstyle(el,sty);},handle_resize:function(){if(this.d===null)
return;if(this.inresize!=0)
return;var dv=this.d;var wo=this.wdiv;var wn=dv.offsetWidth;if(wn==wo)
return;this.wdiv=wn;var p=this._style(dv,"padding-left");if(p){this.pad=parseInt(p);}
this.resize();},_int_rsz:function(o){var wd=this.wdiv;if(wd==null)
return;wd-=this.pad*2;var wo=o.width;if((wd-wo)==0)
return;var r=wo/o.height;o.height=o.pixelHeight=Math.round(wd/r);o.width=o.pixelWidth=wd;},_int_imgrsz:function(o){if(o.complete!==undefined&&!o.complete){return;}
if(o.naturalWidth===undefined||o.naturalHeight===undefined){if(o._swfo===undefined){o.naturalWidth=o.width;o.naturalHeight=o.height;}else{return;}}
if(o._ratio_user!==undefined){this.ia_rat=o._ratio_user;}
var wd=this.wdiv;if(wd==null)
return;wd-=this.pad*2;var rd=this.ia_rat;var ri=o.naturalWidth/o.naturalHeight;if(rd>ri){o.height=Math.round(wd/rd);o.width=Math.round(o.height*ri);}else{o.width=wd;o.height=Math.round(wd/ri);}},resize:function(){if(!this.d)
return;this.inresize=1;if(this.o){this._int_rsz(this.o);}
if(this.va_o){this._int_rsz(this.va_o);}
if(this.ia_o){this._int_imgrsz(this.ia_o);}
this.inresize=0;}};// map of symbols derived from code with copyright, MIT license,
var evhh5v_fullscreen={if_defined:function(){return(this.get_symset_key()!==false);},capable:function(){try{return!(!this.enabled());}
catch(e){return false;}},request:function(elm){var el=elm===undefined?document:elm;el[this.map_val("request")]();},exit:function(){document[this.map_val("exit")]();},element:function(){return document[this.map_val("element")];},enabled:function(){return document[this.map_val("enabled")];},handle_change:function(fun,elm){return this.handle_evt("change_evt",fun,elm);},handle_error:function(fun,elm){return this.handle_evt("error_evt",fun,elm);},handle_evt:function(kevt,fun,elm){var n="on"+this.map_val(kevt);var el=elm===undefined?document:elm;var pre=el[n];el[n]=fun;return pre;},map_val:function(key){if(!(key in this.idxmap))this._throw("invalid key: "+key);return(this.set_throw())[this.idxmap[key]];},set_throw:function(){var sset=this.get_symset();if(sset===false)this._throw();return sset;},get_symset_key:function(){if(this.symset_key==undefined){var key=false;for(var k in this.syms){if(this.syms[k][this.idxmap["exit"]]in document){key=k;break;}}
this.symset_key=key;}
return this.symset_key;},get_symset:function(){if(this.symset==undefined){var key=this.get_symset_key();this.symset=key===false?false:this.syms[key];}
return this.symset;},_throw:function(str){throw ReferenceError(str==undefined?this.def_msg:str);},def_msg:"fullscreen mode is not available",idxmap:{"request":0,"exit":1,"element":2,"enabled":3,"change_evt":4,"error_evt":5},syms:{"spec":['requestFullscreen','exitFullscreen','fullscreenElement','fullscreenEnabled','fullscreenchange','fullscreenerror'],"wk":['webkitRequestFullscreen','webkitExitFullscreen','webkitFullscreenElement','webkitFullscreenEnabled','webkitfullscreenchange','webkitfullscreenerror'],"wkold":['webkitRequestFullScreen','webkitCancelFullScreen','webkitCurrentFullScreenElement','webkitCancelFullScreen','webkitfullscreenchange','webkitfullscreenerror'],"moz":['mozRequestFullScreen','mozCancelFullScreen','mozFullScreenElement','mozFullScreenEnabled','mozfullscreenchange','mozfullscreenerror'],"ms":['msRequestFullscreen','msExitFullscreen','msFullscreenElement','msFullscreenEnabled','msfullscreenchange','msfullscreenerror']}};function evhh5v_fullscreen_ok(){return evhh5v_fullscreen.if_defined();}
var evhh5v_controlbar=function(params){this.OK=false;this.parms=params;this.doc=params.docu_svg;this.svg=params.root_svg;this.ns=this.svg.getAttribute("xmlns");this.rszo=[];this.inibut_use_clearbg=true;this.prog_pl_click_cb=[];this.vol_horz=false;if(Math.hypot){this.hypot=function(x,y){return Math.hypot(x,y);};}
this.wndlength_orig=this.wndlength=parseInt(params['barwidth']);this.wndheight=parseInt(params['barheight']);this.barheight=parseInt(params['barheight']);this.sclfact=this.barheight/100;this.barpadding=0;this.btnstrokewid=1*this.sclfact;this.btnhighltwid=1*this.sclfact;this.strokewidthfact=0.05;this.var_init();this.mk();};evhh5v_controlbar.prototype={proto_set:function(k,v){evhh5v_controlbar.prototype[k]=v;},wrad:40,wnparts:9,wnfrms:9,wnfps:12,init_stroke:9,fepsilon:0.0001,treq_r_bh:1.15470053837925152901,treq_r_hb:0.86602540378443864676,treq_mid_y:0.28867513459481,treqheight:function(base){return base*this.treq_r_hb;},treqbase:function(height){return height*this.treq_r_bh;},deg2rad:function(a){return a*Math.PI/180.0;},rad2deg:function(a){return a/(Math.PI/180.0);},hypot:function(x,y){return Math.sqrt(x*x+y*y);},line_length:function(x0,y0,x1,y1){var dx=Math.abs(x1-x0);var dy=Math.abs(y1-y0);if(dx<this.fepsilon){return dy;}
if(dy<this.fepsilon){return dx;}
return this.hypot(dx,dy);},points_rotate:function(pts,angle,ctrX,ctrY){for(var i=0;i<pts.length;i++){var x=pts[i][0]-ctrX;var y=pts[i][1]-ctrY;var flip=y<0.0?true:false;if(flip){x=-x;y=-y;}
var r=this.line_length(x,y,0.0,0.0);if(r<this.fepsilon){continue;}
var a=Math.acos(x/r)+angle;x=Math.cos(a)*r;y=Math.sin(a)*r;if(flip){x=-x;y=-y;}
pts[i][0]=x+ctrX;pts[i][1]=y+ctrY;}
return pts;},svg_cubic:function(pts){var x=pts[0][0];var y=pts[0][1];var r="M "+x+" "+y;for(var n=1;n<pts.length-3;n+=3){var x0=pts[n][0];var y0=pts[n][1];var x1=pts[n+1][0];var y1=pts[n+1][1];var x2=pts[n+2][0];var y2=pts[n+2][1];r+=" C "+x0+" "+y0
+" "+x1+" "+y1+" "+x2+" "+y2;}
return r;},svg_drawcubic:function(obj,pts){var p=this.svg_cubic(pts);obj.setAttribute("d",p+" Z");return obj;},svg_poly:function(pts){var x=pts[0][0];var y=pts[0][1];var r="M "+x+" "+y;for(var n=1;n<pts.length;n++){x=pts[n][0];y=pts[n][1];r+=" L "+x+" "+y;}
return r;},svg_drawpoly:function(obj,pts){var p=this.svg_poly(pts);obj.setAttribute("d",p+" Z");return obj;},svg_treq_points:function(originX,originY,height,angle){var h2=height/2.0;var base=this.treqbase(height);var b2=base/2.0;var boff=(height-base)/2.0;var pts=[[(originX+boff),(originY+height)],[(originX+boff+base),(originY+height)],[(originX+boff+b2),(originY)],[(originX+boff),(originY+height)]];if(angle){pts=this.points_rotate(pts,angle,originX+h2,originY+h2);}
return pts.slice(0);},svg_treq:function(originX,originY,height,angle){return this.svg_poly(this.svg_treq_points(originX,originY,height,angle));},svg_drawtreq:function(obj,originX,originY,height,angle){var p=this.svg_treq(originX,originY,height,angle);obj.setAttribute("d",p+" Z");return obj;},svg_treq2_points:function(originX,originY,height,angle){var base=this.treqbase(height);var b2=base/2.0;var x0=-b2;var y0=base*this.treq_mid_y;var xoff=x0+originX;var yoff=y0+originY;var pts=[[xoff,yoff],[xoff+base,yoff],[xoff+b2,yoff-height],[xoff,yoff]];if(angle){pts=this.points_rotate(pts,angle,originX,originY);}
return pts.slice(0);},svg_treq2:function(originX,originY,height,angle){return this.svg_poly(this.svg_treq2_points(originX,originY,height,angle));},svg_drawtreq2:function(obj,originX,originY,height,angle){var p=this.svg_treq2(originX,originY,height,angle);obj.setAttribute("d",p+" Z");return obj;},svg_rect_points:function(originX,originY,wi,hi,angle){var pts=[[originX,originY],[(originX+wi),originY],[(originX+wi),(originY+hi)],[originX,(originY+hi)],[originX,originY]];if(angle){var xo=originX+wi/2.0;var yo=originY+hi/2.0;pts=this.points_rotate(pts,angle,xo,yo);}
return pts.slice(0);},svg_rect:function(originX,originY,wi,hi,angle){return this.svg_poly(this.svg_rect_points(originX,originY,wi,hi,angle));},svg_drawrect:function(obj,originX,originY,wi,hi,angle){var p=this.svg_rect(originX,originY,wi,hi,angle);obj.setAttribute("d",p+" Z");return obj;},mk_button:function(clss,id,x,y,w,h,docu){var doc=docu==undefined?this.doc:docu;var ob=doc.createElementNS(this.ns,'svg');ob.setAttribute("class",clss);ob.setAttribute("id",id);ob.setAttribute("x",x);ob.setAttribute("y",y);ob.setAttribute("width",w);ob.setAttribute("height",h);return ob;},mk_rect:function(clss,id,x,y,w,h,docu){var doc=docu==undefined?this.doc:docu;var ob=doc.createElementNS(this.ns,'rect');ob.setAttribute("class",clss);ob.setAttribute("id",id);ob.setAttribute("x",x);ob.setAttribute("y",y);ob.setAttribute("width",w);ob.setAttribute("height",h);return ob;},mk_circle:function(clss,id,x,y,r,docu){var doc=docu==undefined?this.doc:docu;var ob=doc.createElementNS(this.ns,'circle');ob.setAttribute("class",clss);ob.setAttribute("id",id);ob.setAttribute("cx",x);ob.setAttribute("cy",y);ob.setAttribute("r",r);return ob;},mk_ico:function(clss,id,x,y,w,h,docu){var doc=docu==undefined?this.doc:docu;var ob=doc.createElementNS(this.ns,'path');ob.setAttribute("class",clss);ob.setAttribute("id",id);ob.setAttribute("x",x);ob.setAttribute("y",y);ob.setAttribute("width",w);ob.setAttribute("height",h);return ob;},put_rszo:function(o){this.rszo.push(o);},mk_prog_pl:function(parentobj){var barlength=this.barlength;var barheight=this.barheight;var progressbarheight=this.progressbarheight;var progressbaroffs=this.progressbaroffs;var progressbarlength=this.progressbarlength;var progressbarxoffs=this.progressbarxoffs;var tx=progressbarxoffs;var ty=progressbaroffs;var that=this;var dlclk=function(e){that.prog_pl_click(e);};var bg=this.mk_rect("progseekbg","prog_seekbg",tx,ty,progressbarlength,progressbarheight);parentobj.appendChild(bg);bg.addEventListener("click",dlclk,false);this.put_rszo(bg);var fg=this.mk_rect("progseekfg","prog_seekfg",tx,ty,progressbarlength,progressbarheight);parentobj.appendChild(fg);fg.addEventListener("click",dlclk,false);this.put_rszo(fg);return[bg,fg];},mk_prog_dl:function(parentobj){var barlength=this.barlength;var barheight=this.barheight;var progressbarheight=this.progressbarheight;var progressbaroffs=this.progressbaroffs;var progressbarlength=this.progressbarlength;var progressbarxoffs=this.progressbarxoffs;var tx=progressbarxoffs;var ty=barheight-(progressbarheight+progressbaroffs);var bg=this.mk_rect("progloadbg","prog_loadbg",tx,ty,progressbarlength,progressbarheight);parentobj.appendChild(bg);this.put_rszo(bg);var fg=this.mk_rect("progloadfg","prog_loadfg",tx,ty,progressbarlength,progressbarheight);parentobj.appendChild(fg);this.put_rszo(fg);return[bg,fg];},mk_bgrect:function(parentobj){var barlength=this.barlength;var barheight=this.barheight;var bg=this.mk_rect("bgrect","bgrect",0,0,barlength,barheight);bg.setAttribute("onclick","svg_click(this);");parentobj.appendChild(bg);this.put_rszo(bg);return bg;},mk_cna:function(){var butwidth=this.butwidth;var butheight=this.butheight;var sw=butwidth*this.strokewidthfact;var t=0.70710678;var cx=butwidth/2.0-butwidth/2.0*t+sw;var cy=butheight/2.0-butheight/2.0*t+sw;this.cnside=((butwidth+butheight)/2.0)/4.0*1.00+0.0;this.cnaout=[[0+cx,0+cy],[this.cnside+cx,0+cy],[0+cx,this.cnside+cy],[0+cx,0+cy]];var cnhyp=this.hypot(this.cnside,this.cnside);var cnhyp2=cnhyp/2.0;var cnhi=Math.sqrt(this.cnside*this.cnside-cnhyp2*cnhyp2);var cnhi2=cnhi/2.0;var cnoff=Math.sqrt(cnhi2*cnhi2/2.0);cx-=cnoff;cy-=cnoff;this.cnain=[[this.cnside+cx,0+cy],[this.cnside+cx,this.cnside+cy],[0+cx,this.cnside+cy],[this.cnside+cx,0+cy]];},mk_volume:function(parentobj,xoff){var butwidth=this.butwidth;var butheight=this.butheight;var triangleheight=this.triangleheight;var stopheight=butheight/2.0-0.5;var tx=butwidth*xoff;var ty=(this.barheight-butheight)/2;var sw=butwidth*this.strokewidthfact;var r=butwidth*0.5;var rs=r-this.btnstrokewid;var rh=r-this.btnhighltwid;var that=this;var hdl=function(e){var t=this;return that.hdl_volctl(e,t);};var btn=this.mk_button("svgbutt","volume",tx-sw/2,ty-sw/2,butwidth+sw,butheight+sw);btn.setAttribute("onclick","svg_click(this);");btn.setAttribute("onmouseover","setvisi('volume_highlight','visible');");btn.setAttribute("onmouseout","setvisi('volume_highlight','hidden');");btn.addEventListener("wheel",hdl,false);var t=this.mk_circle("btn2","volume_base","50%","50%",r);btn.appendChild(t);t=this.mk_circle("btnstroke","volume_stroke","50%","50%",rs);btn.appendChild(t);btn.hlt=t=this.mk_circle("btnhighl","volume_highlight","50%","50%",rh);t.setAttribute("visibility","hidden");btn.appendChild(t);butwidth+=sw;butheight+=sw;t=this.mk_ico("ico","volumeico",0,0,butwidth,butheight);var mgdia=stopheight*6.0/11.0;var u=triangleheight-this.trianglebase*this.treq_mid_y;cx=butwidth/2.0-u;cy=(butheight-mgdia)/2.0;u=mgdia*0.65;var s2=this.svg_rect(cx,cy,u,mgdia,0)+" Z";u=triangleheight;cx=butwidth/2.0;cy=butheight/2.0;var s1=this.svg_treq2(cx,cy,u,this.deg2rad(-90))+" Z";s2+=" "+s1;t.setAttribute("d",s1);btn.appendChild(t);btn.ico=t;this.volumeico=t;t=this.mk_ico("ico","volumeico2",0,0,butwidth,butheight);t.setAttribute("d",s2);btn.appendChild(t);btn.ico2=t;this.volumeico2=t;parentobj.appendChild(btn);return btn;},mk_fullscreen:function(parentobj,xoff){var butwidth=this.butwidth;var butheight=this.butheight;var triangleheight=this.triangleheight;var tx=butwidth*xoff;var ty=(this.barheight-butheight)/2;var sw=butwidth*this.strokewidthfact;var r=butwidth*0.5;var rs=r-this.btnstrokewid;var rh=r-this.btnhighltwid;if(this.cnaout==undefined)
this.mk_cna();var btn=this.mk_button("svgbutt","fullscreen",tx-sw/2,ty-sw/2,butwidth+sw,butheight+sw);btn.setAttribute("onclick","svg_click(this);");btn.setAttribute("onmouseover","setvisi('fullscreen_highlight','visible');");btn.setAttribute("onmouseout","setvisi('fullscreen_highlight','hidden');");var t=this.mk_circle("btn2","fullscreen_base","50%","50%",r);btn.appendChild(t);t=this.mk_circle("btnstroke","fullscreen_stroke","50%","50%",rs);btn.appendChild(t);btn.hlt=t=this.mk_circle("btnhighl","fullscreen_highlight","50%","50%",rh);t.setAttribute("visibility","hidden");btn.appendChild(t);btn.disabfilter=this.disabfilter;butwidth+=sw;butheight+=sw;t=this.mk_ico("ico","fullscreenout",0,0,butwidth,butheight);var cx=butwidth/2.0;var cy=butheight/2.0;var cna=this.cnaout;cna=this.points_rotate(cna,this.deg2rad(45),cx,cy);var ds=this.svg_poly(cna)+" Z";cna=this.points_rotate(cna,this.deg2rad(90),cx,cy);ds+=" "+this.svg_poly(cna)+" Z";cna=this.cnaout;cna=this.points_rotate(cna,this.deg2rad(90),cx,cy);ds+=" "+this.svg_poly(cna)+" Z";cna=this.cnaout;cna=this.points_rotate(cna,this.deg2rad(90),cx,cy);ds+=" "+this.svg_poly(cna)+" Z";t.setAttribute("d",ds);t.setAttribute("visibility","hidden");btn.appendChild(t);btn.ico_out=t;this.fullscreenicoout=t;t=this.mk_ico("ico","fullscreenin",0,0,butwidth,butheight);cx=butwidth/2.0;cy=butheight/2.0;cna=this.cnain;cna=this.points_rotate(cna,this.deg2rad(45),cx,cy);ds=this.svg_poly(cna)+" Z";cna=this.points_rotate(cna,this.deg2rad(90),cx,cy);ds+=" "+this.svg_poly(cna)+" Z";cna=this.cnain;cna=this.points_rotate(cna,this.deg2rad(90),cx,cy);ds+=" "+this.svg_poly(cna)+" Z";cna=this.cnain;cna=this.points_rotate(cna,this.deg2rad(90),cx,cy);ds+=" "+this.svg_poly(cna)+" Z";t.setAttribute("d",ds);btn.appendChild(t);btn.ico_in=t;this.fullscreenicoin=t;parentobj.appendChild(btn);return btn;},mk_doscale:function(parentobj,xoff){var butwidth=this.butwidth;var butheight=this.butheight;var triangleheight=this.triangleheight;var tx=butwidth*xoff;var ty=(this.barheight-butheight)/2;var sw=butwidth*this.strokewidthfact;var r=butwidth*0.5;var rs=r-this.btnstrokewid;var rh=r-this.btnhighltwid;if(this.cnaout==undefined)
this.mk_cna();var btn=this.mk_button("svgbutt","doscale",tx-sw/2,ty-sw/2,butwidth+sw,butheight+sw);btn.setAttribute("onclick","svg_click(this);");btn.setAttribute("onmouseover","setvisi('doscale_highlight','visible');");btn.setAttribute("onmouseout","setvisi('doscale_highlight','hidden');");var t=this.mk_circle("btn2","doscale_base","50%","50%",r);btn.appendChild(t);t=this.mk_circle("btnstroke","doscale_stroke","50%","50%",rs);btn.appendChild(t);btn.hlt=t=this.mk_circle("btnhighl","doscale_highlight","50%","50%",rh);t.setAttribute("visibility","hidden");btn.appendChild(t);btn.disabfilter=this.disabfilter;butwidth+=sw;butheight+=sw;t=this.mk_ico("ico","doscaleout",0,0,butwidth,butheight);var cx=butwidth/2.0;var cy=butheight/2.0;var cna=this.cnaout;cna=this.points_rotate(cna,this.deg2rad(-45),cx,cy);var ds=this.svg_poly(cna)+" Z";cna=this.cnaout;cna=this.points_rotate(cna,this.deg2rad(180),cx,cy);ds+=" "+this.svg_poly(cna)+" Z";var cnside=this.cnside;cx-=cnside/2.0;cy-=cnside/2.0;var rs=this.svg_rect(cx,cy,cnside,cnside,0);ds+=" "+rs+" Z";t.setAttribute("d",ds);t.setAttribute("visibility","hidden");btn.appendChild(t);btn.ico_out=t;this.doscaleicoout=t;t=this.mk_ico("ico","doscalein",0,0,butwidth,butheight);cx=butwidth/2.0;cy=butheight/2.0;cna=this.cnain;cna=this.points_rotate(cna,this.deg2rad(-45),cx,cy);ds=this.svg_poly(cna)+" Z";cna=this.cnain;cna=this.points_rotate(cna,this.deg2rad(180),cx,cy);ds+=" "+this.svg_poly(cna)+" Z";ds+=" "+rs+" Z";t.setAttribute("d",ds);btn.appendChild(t);btn.ico_in=t;this.doscaleicoin=t;parentobj.appendChild(btn);return btn;},mk_stop:function(parentobj,xoff){var butwidth=this.butwidth;var butheight=this.butheight;var triangleheight=this.triangleheight;var tx=butwidth*xoff;var ty=(this.barheight-butheight)/2;var sw=butwidth*this.strokewidthfact;var r=butwidth*0.5;var rs=r-this.btnstrokewid;var rh=r-this.btnhighltwid;var btn=this.mk_button("svgbutt","stop",tx-sw/2,ty-sw/2,butwidth+sw,butheight+sw);btn.setAttribute("onclick","svg_click(this);");btn.setAttribute("onmouseover","setvisi('stop_highlight','visible');");btn.setAttribute("onmouseout","setvisi('stop_highlight','hidden');");var t=this.mk_circle("btn2","stop_base","50%","50%",r);btn.appendChild(t);t=this.mk_circle("btnstroke","stop_stroke","50%","50%",rs);btn.appendChild(t);btn.hlt=t=this.mk_circle("btnhighl","stop_highlight","50%","50%",rh);t.setAttribute("visibility","hidden");btn.appendChild(t);btn.disabfilter=this.disabfilter;butwidth+=sw;butheight+=sw;t=this.mk_ico("ico","stopico",0,0,butwidth,butheight);var stopheight=butheight/2.0-0.5;var cx=(butwidth-stopheight)/2.0;var cy=(butheight-stopheight)/2.0;btn.ico=t=this.svg_drawrect(t,cx,cy,stopheight,stopheight);btn.appendChild(t);this.stopico=t;parentobj.appendChild(btn);return btn;},mk_waitanim:function(parentobj,doc){var wrad=this.wrad;var wnparts=this.wnparts;var wnfrms=this.wnfrms;var theight=12.00*9/wnparts;var wang=360;var winc=wang/wnparts;var sidelen=wrad*2.4;var sc=theight*1.0;var xo=theight*0.5;var yo=theight*-0.25;if(this.arrow_shaft_data===undefined)
this.proto_set("arrow_shaft_data",[[xo+0.0573996*sc,yo+0.277178*sc],[xo+0.0606226*sc,yo+0.0199845*sc],[xo+0.57*sc,yo+0.03*sc],[xo+0.87*sc,yo+0.1*sc],[xo+1.16*sc,yo+0.21*sc],[xo+1.45417*sc,yo+0.437099*sc],[xo+1.27005*sc,yo+0.503488*sc],[xo+1.11376*sc,yo+0.462586*sc],[xo+1.1448*sc,yo+0.630027*sc],[xo+1.06325*sc,yo+0.863602*sc],[xo+0.878121*sc,yo+0.592868*sc],[xo+0.704932*sc,yo+0.416057*sc],[xo+0.447649*sc,yo+0.305126*sc],[xo+0.0573996*sc,yo+0.277178*sc],[xo+0.0606226*sc,yo+0.0199845*sc]]);var pcub=this.arrow_shaft_data;if(this.arrow_head_data===undefined)
this.proto_set("arrow_head_data",this.svg_treq_points(-theight/2,-theight/2,theight,this.deg2rad(-90)));var tpts=this.arrow_head_data;if(this.arrow_svg_data===undefined)
this.proto_set("arrow_svg_data",this.svg_poly(tpts)+" Z "
+this.svg_cubic(pcub)+" Z");var data=this.arrow_svg_data;var btn=this.mk_button("svgbutt","wait",0,0,sidelen,sidelen,doc);btn.setAttribute("viewbox","0 0 "+sidelen+" "+sidelen);btn.setAttribute("visibility","hidden");var gmain=doc.createElementNS(this.ns,'g');gmain.setAttribute("id","waitgmain");gmain.setAttribute("transform","translate("+(sidelen/2)+","+(sidelen/2)+")");this.wait_anim_obj={};var adat=this.wait_anim_obj;adat.transform_obj=btn;adat.transform_grp=gmain;adat.transform_idx=0;adat.transform_max=wnfrms;adat.transform_deg=-360/adat.transform_max;adat.transform_frm=[];for(var i=0;i<adat.transform_max;i++){adat.transform_frm[i]=adat.transform_deg*i;}
adat.transform_fps=this.wnfps;adat.is_running=false;adat.timehandle=false;adat.parent_obj=this;if(this.wait_anim_func===undefined)
this.proto_set("wait_anim_func",function(){if(this.is_running){if(this.timehandle===false){var that=this;this.timehandle=setInterval(function(){that.anim_func();},parseInt(1000/this.transform_fps));}else{var o=this.transform_grp;var rv=this.transform_frm[this.transform_idx++];if(this.transform_idx==this.transform_max)
this.transform_idx=0;if(!this.orig_trfm)
this.orig_trfm=o.getAttribute("transform");o.setAttribute("transform",this.orig_trfm+" rotate("+rv+")");}}else{if(this.timehandle!==false){clearInterval(this.timehandle);this.timehandle=false;}
this.transform_idx=0;if(this.orig_trfm){var o=this.transform_grp;o.setAttribute("transform",this.orig_trfm);}}});adat.anim_func=this.wait_anim_func;adat.start=function(){adat.is_running=true;adat.anim_func();};adat.stop=function(){adat.is_running=false;};for(var i=0;i<wnparts;i++){var ad=winc*i;var a=this.deg2rad(ad);var ci=1.0-(ad/wang)+0.2;var bl=parseInt(ci*255),rg=parseInt((ci-0.2)*255);var clr="rgb("+rg+","+rg+","+bl+")";var opa=""+ci;sc=1.0-0.5*(ad/wang);var g=doc.createElementNS(this.ns,'g');var tr=-wrad;var ta=-a;g.setAttribute("transform","translate("+(tr*Math.sin(ta))+", "+(tr*Math.cos(ta))+")");var p=doc.createElementNS(this.ns,'path');p.setAttribute("style","stroke:none;fill:"+clr+";opacity:"+opa);p.setAttribute("transform","scale("+sc+", "+sc+") "+
"rotate("+ad+") ");p.setAttribute("d",data);g.appendChild(p);gmain.appendChild(g);}
btn.appendChild(gmain);this.wait_group=gmain;parentobj.appendChild(btn);return btn;},mk_inibut:function(parentobj,doc){var r=this.wrad;var sw=this.init_stroke;var butwidth=(r+sw)*2;var butheight=butwidth;var t;t=document.getElementById(this.b_parms["parent"]);t.style.width=""+butwidth+"px";t.style.height=""+butheight+"px";var btn=this.mk_button("svgbutt","inibut",0,0,butwidth,butheight,doc);btn.setAttribute("onclick","svg_click(this);");if(this.inibut_use_clearbg){var clss=false?"ico_transbg":"ico_clearbg";t=this.mk_circle(clss,"but_clearbg","50%","50%",r,doc);btn.appendChild(t);this.but_clearbg=t;}
t=this.mk_circle("icoline","but_circle","50%","50%",r,doc);btn.appendChild(t);this.but_circle=t;t=this.mk_ico("ico","but_arrow",0,0,butwidth,butheight,doc);t=this.svg_drawtreq2(t,butwidth/2.0,butheight/2.0,r,this.deg2rad(90));btn.appendChild(t);this.but_arrow=t;parentobj.appendChild(btn);return btn;},mk_volctl:function(parentobj,doc){var t=this.butwidthfactor*parseInt(this.parms["barheight"]);var volbarlen=t*4;var volbarwid=t/2;var sw=volbarwid*2.0;var len_all=volbarlen+sw;var horz=this.vol_horz;var that=this;var hdlmd=function(e){that.volctl_mousedown=1;return false;};var hdlmu=function(e){if(that.volctl_mousedown){var t=this;that.hdl_volctl(e,t);}
that.volctl_mousedown=0;return false;};var hdlmm=function(e){if(that.volctl_mousedown){var t=this;that.hdl_volctl(e,t);}
return false;};var hdlbg=function(e){that.volctl_mousedown=0;};var hdl=function(e){var t=this;that.hdl_volctl(e,t);return false;};this.vol_width=horz?len_all:sw;this.vol_height=horz?sw:len_all;t=document.getElementById(this.v_parms["parent"]);t.style.width=""+this.vol_width+"px";t.style.height=""+this.vol_height+"px";var btn=this.mk_button("svgbutt","volgadget",0,0,this.vol_width,this.vol_height,doc);t=this.mk_ico("bgarea","vol_bgarea",0,0,this.vol_width,this.vol_height,doc);t.style.strokeWidth=sw;if(horz){t=this.svg_drawpoly(t,[[volbarwid,volbarwid],[volbarlen+volbarwid,volbarwid],[volbarwid,volbarwid]]);}else{t=this.svg_drawpoly(t,[[volbarwid,volbarwid],[volbarwid,volbarlen+volbarwid],[volbarwid,volbarwid]]);}
btn.appendChild(t);t.addEventListener("mouseover",hdlbg,false);this.vol_bgarea=t;var bx=horz?volbarwid:volbarwid/2.0;var by=horz?volbarwid/2.0:volbarwid;var bw=horz?volbarlen:volbarwid;var bh=horz?volbarwid:volbarlen;t=this.mk_rect("bgslide","vol_bgslide",bx,by,bw,bh,doc);t.addEventListener("mousedown",hdlmd,false);t.addEventListener("mouseup",hdlmu,false);t.addEventListener("mousemove",hdlmm,false);t.addEventListener("wheel",hdl,false);t.addEventListener("touchmove",hdl,false);btn.appendChild(t);this.vol_bgslide=t;t=this.mk_rect("fgslide","vol_fgslide",bx,by,bw,bh,doc);t.addEventListener("mousedown",hdlmd,false);t.addEventListener("mouseup",hdlmu,false);t.addEventListener("mousemove",hdlmm,false);t.addEventListener("wheel",hdl,false);t.addEventListener("touchmove",hdl,false);btn.appendChild(t);this.vol_fgslide=t;parentobj.appendChild(btn);return btn;},mk_playpause:function(parentobj,xoff){var butwidth=this.butwidth;var butheight=this.butheight;var triangleheight=this.triangleheight;var tx=butwidth*xoff;var ty=(this.barheight-butheight)/2;var sw=butwidth*this.strokewidthfact;var r=butwidth*0.5;var rs=r-this.btnstrokewid;var rh=r-this.btnhighltwid;var btn=this.mk_button("svgbutt","playpause",tx-sw/2,ty-sw/2,butwidth+sw,butheight+sw);btn.setAttribute("onclick","svg_click(this);");btn.setAttribute("onmouseover","setvisi('playpause_highlight','visible');");btn.setAttribute("onmouseout","setvisi('playpause_highlight','hidden');");var t=this.mk_circle("btn2","playpause_base","50%","50%",r);btn.appendChild(t);t=this.mk_circle("btnstroke","playpause_stroke","50%","50%",rs);btn.appendChild(t);t=this.mk_circle("btnhighl","playpause_highlight","50%","50%",rh);t.setAttribute("visibility","hidden");btn.appendChild(t);butwidth+=sw;butheight+=sw;t=this.mk_ico("ico","playico",0,0,butwidth,butheight);t=this.svg_drawtreq2(t,butwidth/2.0,butheight/2.0,triangleheight,this.deg2rad(90));btn.appendChild(t);this.playico=t;var barwid=this.barwid;var barhigh=this.barhigh;t=this.mk_ico("icoline","pauseico",0,0,butwidth,butheight);t.setAttribute("style","stroke-width: "+barwid);t.setAttribute("d","M "+(butwidth*2/5-(barwid/2.0))+" "+((butheight-barhigh)/2)+
" l 0"+" "+barhigh+
" M "+(butwidth*4/5-(barwid/2.0))+" "+((butheight-barhigh)/2)+
" l 0"+" "+barhigh);t.setAttribute("visibility","hidden");btn.appendChild(t);this.pauseico=t;parentobj.appendChild(btn);return btn;},var_init:function(){var barsubtr=this.barpadding*2;this.barlength=this.wndlength-barsubtr;this.butwidthfactor=0.56;this.butwidth=Math.round(this.barheight*this.butwidthfactor)+1;this.butwidth|=1;this.butheight=this.butwidth;this.triangleheight=this.butheight/2.0;var t=Math.round(this.treqbase(this.triangleheight));this.trianglebase=(Math.round(this.butheight)&1)?(t|1):((t+1)&~1);this.triangleheight=this.treqheight(this.trianglebase);this.progressbarheight=(this.barheight-this.butheight)*0.25;this.progressbaroffs=((this.barheight-this.butheight)*0.20)/2.0;this.progressbarlength=this.barlength-(this.progressbaroffs*2);this.progressbarxoffs=(this.barlength-this.progressbarlength)/2.0;this.barwid=this.butwidth/5;this.barhigh=this.treqbase(this.triangleheight)-this.barwid;this.viewbox="0 0 "+this.wndlength+" "+this.wndheight;},disabfilter:'url(#blur_dis)',xfacts:[0.5,1.5,2,1.5,2],prog_pl_click:function(e){if(this.prog_pl_click_cb.length<2)
return;this.prog_pl_click_cb[0].call(this.prog_pl_click_cb[1],[e,this._pl_len]);},add_prog_pl_click_cb:function(f_cb,v_this){this.prog_pl_click_cb[0]=f_cb;this.prog_pl_click_cb[1]=v_this;},init_inibut:function(){if(this.b_parms!==undefined){return true;}
var k=this.parms["parentdiv"];if(evhh5v_ctlbutmap[k]===undefined||evhh5v_ctlbutmap[k]["loaded"]!==true){return false;}
this.b_parms=evhh5v_ctlbutmap[k];var svg=this.b_parms.root_svg;var doc=this.b_parms.docu_svg;var but=doc.getElementById("g_inibut");this.inibut=this.mk_inibut(but,doc);but=doc.getElementById("g_wait");this.waitanim=this.mk_waitanim(but,doc);return true;},init_volctl:function(){if(this.v_parms!==undefined){return true;}
var k=this.parms["parentdiv"];if(evhh5v_ctlvolmap[k]===undefined||evhh5v_ctlvolmap[k]["loaded"]!==true){return false;}
this.v_parms=evhh5v_ctlvolmap[k];var svg=this.v_parms.root_svg;var doc=this.v_parms.docu_svg;var but=doc.getElementById("g_slider");this.volctl=this.mk_volctl(but,doc);this.volctlg=but;this.volctl.scalefactor=1;return true;},is_mobile:function(){if(this.parms['mob']!==undefined){return(this.parms['mob']=='true');}
return evhh5v_ua_is_mobile();},mk:function(){var mobi=this.is_mobile();var mnot=!mobi;var svg=this.svg;var doc=this.doc;var ofs=0;this.vol_horz=mobi;if(mobi){this.xfacts=[0.25,1.75,1.75,1.75,1.75];}
svg.setAttribute("viewBox",this.viewbox);this.gall=doc.getElementById("g_all_g");var gbg=doc.getElementById("ctlbar_bg");this.bgrect=this.mk_bgrect(gbg);var gbn=doc.getElementById("g_button_1");this.button_play=this.mk_playpause(gbn,ofs+=this.xfacts[0]);this.button_stop=this.mk_stop(gbn,ofs+=this.xfacts[1]);this.stopbtn_disab();if(mnot){this.button_doscale=this.mk_doscale(gbn,ofs+=this.xfacts[2]);this.show_scalein();this.blur_doscale();this.button_fullscreen=this.mk_fullscreen(gbn,ofs+=this.xfacts[3]);this.show_fullscreenout();this.blur_fullscreen();}else{this.button_doscale=this.button_fullscreen=false;}
this.button_volume=this.mk_volume(gbn,ofs+=this.xfacts[4]);var gpl=doc.getElementById("prog_seek");this.progress_play=this.mk_prog_pl(gpl);var gdl=doc.getElementById("prog_load");this.progress_load=this.mk_prog_dl(gdl);this.init_inibut();this.init_volctl();this.OK=true;},set_bar_visibility:function(visi){this.svg.setAttribute("visibility",visi);},show_waitanim:function(x,y){if(!this.init_inibut()){return false;}
this.hide_inibut();var wa=this.waitanim;wa.width.baseVal.convertToSpecifiedUnits(wa.width.baseVal.SVG_LENGTHTYPE_PX),wa.height.baseVal.convertToSpecifiedUnits(wa.height.baseVal.SVG_LENGTHTYPE_PX);var w=wa.width.baseVal.valueInSpecifiedUnits,h=wa.height.baseVal.valueInSpecifiedUnits;var d=document.getElementById(this.b_parms["ctlbardiv"]);var l=(x-w/2);var t=(y-h/2);d.style.left=""+l+"px";d.style.top=""+t+"px";var svg=this.b_parms.root_svg;svg.setAttribute("visibility","visible");wa.setAttribute("visibility","visible");this.wait_group.setAttribute("visibility","visible");this.wait_anim_obj.start();return true;},hide_waitanim:function(x,y){if(!this.init_inibut()){return false;}
var wa=this.waitanim;wa.width.baseVal.convertToSpecifiedUnits(wa.width.baseVal.SVG_LENGTHTYPE_PX);var w=wa.width.baseVal.valueInSpecifiedUnits;var d=document.getElementById(this.b_parms["ctlbardiv"]);var svg=this.b_parms.root_svg;svg.setAttribute("visibility","hidden");wa.setAttribute("visibility","hidden");this.wait_group.setAttribute("visibility","hidden");d.style.left=""+(-w)+"px";d.style.top="0px";this.wait_anim_obj.stop();return true;},show_inibut:function(x,y){if(!this.init_inibut()){return false;}
this.inibut.width.baseVal.convertToSpecifiedUnits(this.inibut.width.baseVal.SVG_LENGTHTYPE_PX),this.inibut.height.baseVal.convertToSpecifiedUnits(this.inibut.height.baseVal.SVG_LENGTHTYPE_PX);var w=this.inibut.width.baseVal.valueInSpecifiedUnits,h=this.inibut.height.baseVal.valueInSpecifiedUnits;var d=document.getElementById(this.b_parms["ctlbardiv"]);var l=(x-w/2);var t=(y-h/2);d.style.left=""+l+"px";d.style.top=""+t+"px";var svg=this.b_parms.root_svg;svg.setAttribute("visibility","visible");this.inibut.setAttribute("visibility","visible");if(this.but_clearbg)
this.but_clearbg.setAttribute("visibility","visible");this.but_circle.setAttribute("visibility","visible");this.but_arrow.setAttribute("visibility","visible");return true;},hide_inibut:function(){if(!this.init_inibut()){return false;}
this.inibut.width.baseVal.convertToSpecifiedUnits(this.inibut.width.baseVal.SVG_LENGTHTYPE_PX);var w=this.inibut.width.baseVal.valueInSpecifiedUnits;var svg=this.b_parms.root_svg;svg.setAttribute("visibility","hidden");this.inibut.setAttribute("visibility","hidden");if(this.but_clearbg)
this.but_clearbg.setAttribute("visibility","hidden");this.but_circle.setAttribute("visibility","hidden");this.but_arrow.setAttribute("visibility","hidden");var d=document.getElementById(this.b_parms["ctlbardiv"]);d.style.left=""+(-w)+"px";d.style.top="0px";return true;},show_volctl:function(bottom,width){if(!this.init_volctl()){return false;}
var horz=this.vol_horz;var x;this.button_volume.x.baseVal.convertToSpecifiedUnits(this.button_volume.x.baseVal.SVG_LENGTHTYPE_PX);x=this.button_volume.x.baseVal.valueInSpecifiedUnits;this.button_volume.width.baseVal.convertToSpecifiedUnits(this.button_volume.width.baseVal.SVG_LENGTHTYPE_PX);var bw=this.button_volume.width.baseVal.valueInSpecifiedUnits;this.volctl.height.baseVal.convertToSpecifiedUnits(this.volctl.height.baseVal.SVG_LENGTHTYPE_PX);var vh=this.volctl.height.baseVal.valueInSpecifiedUnits;this.volctl.width.baseVal.convertToSpecifiedUnits(this.volctl.width.baseVal.SVG_LENGTHTYPE_PX);var vw=this.volctl.width.baseVal.valueInSpecifiedUnits;var fact;if(this.button_volume.getCTM){var ctm=this.button_volume.getCTM();fact=ctm["a"];}else{fact=this.wndlength_orig/this.wndlength;}
x*=fact;bw*=fact;if(horz){x+=(bw-this.vol_width);}else{x+=(bw-this.vol_width)/2.0;}
var l=x;var t=bottom-this.vol_height;var scl=1;if(horz&&(l<0||this.vol_width>width)){if(this.vol_width>width){scl*=width/this.vol_width;}
l=0;}else if(!horz&&(t<0||this.vol_height>bottom)){t=this.vol_height;if(this.vol_height>bottom){scl*=bottom/this.vol_height;t*=scl;}
t=(bottom-t)/2;}
this.volctlg.setAttribute("transform","scale("+scl+")");this.volctl.scalefactor=scl;var d=document.getElementById(this.v_parms["ctlbardiv"]);d.style.left=""+l+"px";d.style.top=""+t+"px";d.style.width=""+(vw*scl)+"px";d.style.height=""+(vh*scl)+"px";var svg=this.v_parms.root_svg;svg.setAttribute("visibility","visible");this.volctl.setAttribute("visibility","visible");this.vol_bgarea.setAttribute("visibility","visible");this.vol_bgslide.setAttribute("visibility","visible");this.vol_fgslide.setAttribute("visibility","visible");return true;},hide_volctl:function(){if(!this.init_volctl()){return false;}
this.volctl.width.baseVal.convertToSpecifiedUnits(this.volctl.width.baseVal.SVG_LENGTHTYPE_PX);var w=this.volctl.width.baseVal.valueInSpecifiedUnits;var svg=this.v_parms.root_svg;svg.setAttribute("visibility","hidden");this.volctl.setAttribute("visibility","hidden");this.vol_bgarea.setAttribute("visibility","hidden");this.vol_bgslide.setAttribute("visibility","hidden");this.vol_fgslide.setAttribute("visibility","hidden");var d=document.getElementById(this.v_parms["ctlbardiv"]);d.style.left=""+(-w)+"px";d.style.top="0px";return true;},scale_volctl:function(v){if(!this.init_volctl()){return false;}
var horz=this.vol_horz;var bg,fg;bg=this.vol_bgslide;fg=this.vol_fgslide;v=Math.max(0,Math.min(1,v));if(horz){var bw=parseFloat(bg.getAttribute("width"));var nv=bw*v;fg.setAttribute("width",""+nv+"px");}else{var bh=parseFloat(bg.getAttribute("height"));var bt=parseFloat(bg.getAttribute("y"));var nv=bh*v;var nt=bt+bh-nv;fg.setAttribute("y",""+nt+"px");fg.setAttribute("height",""+nv+"px");}},hdl_volctl:function(e,ob){e.preventDefault();if(this.controller_handle_volume===undefined){return false;}
var horz=this.vol_horz;var bg,fg,dim,dir;bg=this.vol_bgslide;fg=this.vol_fgslide;if(horz){dim="width";dir="x";}else{dim="height";dir="y";}
var fh=parseFloat(fg.getAttribute(dim));var bh=parseFloat(bg.getAttribute(dim));var bt=parseFloat(bg.getAttribute(dir));var v;if(e.type==="wheel"){v=fh-((e.deltaY<0)?-3:3);}else if(e.type==="touchmove"){var t=parseFloat(horz?(0-e.changedTouches[0].clientX):e.changedTouches[0].clientY);if(!isFinite(t))
return;if(!this.vol_touchstart){this.vol_touchstart=0;}
var cur=t-this.vol_touchstart;v=(fh-cur)/this.volctl.scalefactor;this.vol_touchstart=t;}else if(horz){v=e.clientX/this.volctl.scalefactor-bt;}else{v=bh-(e.clientY/this.volctl.scalefactor-bt);}
this.controller_handle_volume(v/bh);return false;},resize_bar:function(w,h){var oh=this.barheight;var ow=this.wndlength;var nw=oh*w/h;this.wndlength=nw;this.var_init();nw=this.barlength;var pnw=this.progressbarlength;this._pl_len=w;this.svg.setAttribute("viewBox",this.viewbox);for(var i=0;i<this.rszo.length;i++){var t=this.rszo[i].id=="bgrect"?nw:pnw;this.rszo[i].setAttribute("width",t);}},show_dl_active:function(){this.progress_load[1].setAttribute("class","progloadfgdl");},show_dl_inactive:function(){this.progress_load[1].setAttribute("class","progloadfg");},progress_pl:function(t){this.progress_play[1].setAttribute("width",t*this.progressbarlength);},show_fullscreenout:function(){var btn=this.button_fullscreen;if(!btn)return;this.fullscreenicoin.setAttribute("visibility","hidden");this.fullscreenicoout.setAttribute("visibility","visible");btn.hlt.setAttribute("visibility","hidden");},show_fullscreenin:function(){var btn=this.button_fullscreen;if(!btn)return;this.fullscreenicoout.setAttribute("visibility","hidden");this.fullscreenicoin.setAttribute("visibility","visible");btn.hlt.setAttribute("visibility","hidden");},blur_fullscreen:function(){var btn=this.button_fullscreen;if(!btn)return;btn.removeAttribute("onclick");btn.removeAttribute("onmouseover");btn.removeAttribute("onmouseout");btn.hlt.setAttribute("visibility","hidden");btn.style.cursor="inherit";btn.ico_out.setAttribute("filter",btn.disabfilter);},unblur_fullscreen:function(){var btn=this.button_fullscreen;if(!btn)return;btn.setAttribute("onclick","svg_click(this);");btn.setAttribute("onmouseover","setvisi('fullscreen_highlight','visible');");btn.setAttribute("onmouseout","setvisi('fullscreen_highlight','hidden');");btn.style.cursor="pointer";btn.ico_out.removeAttribute("filter");},show_scaleout:function(){this.doscaleicoin.setAttribute("visibility","hidden");this.doscaleicoout.setAttribute("visibility","visible");},show_scalein:function(){this.doscaleicoout.setAttribute("visibility","hidden");this.doscaleicoin.setAttribute("visibility","visible");},blur_doscale:function(){var btn=this.button_doscale;if(!btn)return;btn.removeAttribute("onclick");btn.removeAttribute("onmouseover");btn.removeAttribute("onmouseout");btn.hlt.setAttribute("visibility","hidden");btn.style.cursor="inherit";btn.ico_in.setAttribute("filter",btn.disabfilter);btn.ico_out.setAttribute("filter",btn.disabfilter);},unblur_doscale:function(){var btn=this.button_doscale;if(!btn)return;btn.setAttribute("onclick","svg_click(this);");btn.setAttribute("onmouseover","setvisi('doscale_highlight','visible');");btn.setAttribute("onmouseout","setvisi('doscale_highlight','hidden');");btn.style.cursor="pointer";btn.ico_in.removeAttribute("filter");btn.ico_out.removeAttribute("filter");},show_playico:function(){this.pauseico.setAttribute("visibility","hidden");this.playico.setAttribute("visibility","visible");},show_pauseico:function(){this.playico.setAttribute("visibility","hidden");this.pauseico.setAttribute("visibility","visible");},stopbtn_disab:function(){var btn=this.button_stop;if(!btn)return;btn.removeAttribute("onclick");btn.removeAttribute("onmouseover");btn.removeAttribute("onmouseout");btn.hlt.setAttribute("visibility","hidden");btn.style.cursor="inherit";btn.ico.setAttribute("filter",btn.disabfilter);},stopbtn_enab:function(){var btn=this.button_stop;if(!btn)return;btn.setAttribute("onclick","svg_click(this);");btn.setAttribute("onmouseover","setvisi('stop_highlight','visible');");btn.setAttribute("onmouseout","setvisi('stop_highlight','hidden');");btn.style.cursor="pointer";btn.ico.removeAttribute("filter");},endmember:this};function evhh5v_setvisi(obj,visi){if(obj){obj.setAttribute("visibility",visi);}};function evhh5v_svg_click(obj,parms){var bar=evhh5v_ctlbarmap[parms["parentdiv"]];if(!bar||!bar["loaded"]||!bar.evhh5v_controller){return;}
bar.evhh5v_controller.button_click(obj);};var evhh5v_controller=function(vid,ctlbar,pad){vid.removeAttribute("controls");this._vid=vid;this.ctlbar=ctlbar;this.bar=ctlbar.evhh5v_controlbar;this.pad=pad;this.handlermap={};this.auxdiv=document.getElementById(this.ctlbar["auxdiv"]);this.bardiv=document.getElementById(this.ctlbar["ctlbardiv"]);this.div_bg_clr=evhh5v_getstyle(this.auxdiv,'background-color');this.auxdivclass=this.auxdiv.getAttribute("class");this.tickinterval_divisor=1000/this.tickinterval;this.ptrtickmax=this.tickinterval_divisor*this.ptrinterval;this.ptrtick=0;this.doshowbartime=false;if(this.params['hidebar']&&this.params['hidebar']=='true'){this.doshowbartime=true;}
this.doshowbar=true;if(this.params['disablebar']&&this.params['disablebar']=='true'){this.disablebar=true;this.doshowbar=false;this.doshowbartime=false;}
this.barpadding=2;this.yshowpos=this.bar_y=this.height-this.barheight;this.doscale=true;var that=this;this.bar.add_prog_pl_click_cb(this.prog_pl_click_cb,that);this.ntick=0;this._vid.setAttribute("class","evhh5v_mouseptr_normal");if(ctlbar['aspect']!==undefined){var r;r=/\b(-?[0-9]+)[^0-9\.](-?[0-9]+)\b/.exec(""+ctlbar['aspect']);r=r?(r[1]/r[2]):parseFloat(ctlbar['aspect']);r=isFinite(r)?r:0;if(Math.abs(r)<0.5||Math.abs(r)>10){r=0;}
this.aspect=Math.abs(r);}else{this.aspect=0;}
this.is_canvas=false;};evhh5v_controller.prototype={aspect_min:0.0,tickinterval:50,ptrinterval:5,barshowincr:2,barshowmargin:2,default_init_vol:50,mouse_hide_class:"evhh5v_mouseptr_hidden",mouse_show_class:"evhh5v_mouseptr_normal",get params(){return this.ctlbar;},mk:function(){this.v.evhh5v_controller=this;this.ctlbar.evhh5v_controller=this;this.height=this.v.height;this.width=this.v.width;if(this.params['play']!==undefined){if(this.params['play']=='true'){this.autoplay=true;}}else{this.autoplay=false;}
if(evhh5v_fullscreen_ok()){this.bar.unblur_fullscreen();}else{this.bar.blur_fullscreen();}
if(this.disablebar){this.bar.set_bar_visibility("hidden");this.showhideBar(this.doshowbar=false);}else{this.set_bar_y(this.bar_y);this.bar.set_bar_visibility("visible");}
this.setup_canvas();this.install_handlers();var that=this;this.bar.controller_handle_volume=function(pct){if(!isFinite(pct)){return;}
var v=that._vid;if(v.volume!==undefined){pct=Math.max(0,Math.min(1,pct));v.volume=that.init_vol=pct;}}
this.bar.scale_volctl(1);if(this.autoplay){this._vid.setAttribute("preload","metadata");}else{var f=function(){if(that.has_been_played){that.bar.hide_inibut();return;}
that.bar.show_inibut(that.width/2,that.height/2);setTimeout(f,1000);};f();}},on_metadata:function(){if(this.init_vol===undefined){var t=this.params['volume']!==undefined?parseFloat(this.params['volume']):this.default_init_vol;if(!isFinite(t)){t=this.default_init_vol;}
this.init_vol=Math.max(0,Math.min(1,t/100.0));}
this._vid.volume=this.init_vol;if(this.autoplay){this.play();}},setup_canvas:function(){var params=this.params;var force=false;if(this.aspect<=0){var t;t=params["pixelaspect"];if(t!==undefined){var r;r=/\b(-?[0-9]+)[^0-9\.](-?[0-9]+)\b/.exec(""+t);r=r?(r[1]/r[2]):parseFloat(t);r=isFinite(r)?r:0;if(!(Math.abs(r)<0.5||Math.abs(r)>10)){this.pixelaspect=Math.abs(r);}}
t=params["aspectautoadj"];if(!this.pixelaspect&&t!==undefined){this.aspectautoadj=(t=='true');}}
force=(this.pixelaspect||this.aspectautoadj);if(/Opera/i.test(navigator["userAgent"])){force=true;}
if(!force){if(this.aspect<=0||Math.abs(this.aspect-this.width/this.height)<this.aspect_min){return;}}
var cw=this.width,ch=this.height;this._cnv=document.createElement('canvas');var pt=this._vid.parentNode;pt.replaceChild(this._cnv,this._vid);this.is_canvas=true;this._cnv.width=cw;this._cnv.height=ch;this.setup_aspect_factors();this.get_canvas_context();this.canvas_clear();var that=this;var pstr=this._vid.getAttribute("poster");if(pstr&&pstr!=''){this._cnv_poster=document.createElement('img');this._cnv_poster.onload=function(){that.put_canvas_poster();};this._cnv_poster.src=pstr;}
this._cnv.setAttribute("class","evhh5v_mouseptr_normal");},get_canvas_context:function(){if(this.is_canvas){this._ctx=this._cnv.getContext('2d');return this._ctx;}
return null;},put_canvas_poster:function(){if(!this.playing&&this.is_canvas&&isFinite(this._vid.currentTime)&&this._vid.currentTime>0){this.canvas_clear();this.put_canvas_frame_single();}else if(this.is_canvas&&this._cnv_poster!=undefined&&!this.playing){this.canvas_clear();var cw=this.width,ch=this.height;var iw=this._cnv_poster.width,ih=this._cnv_poster.height,ix,iy;var origaspect=cw/ch,aspect=iw/ih;if(aspect>origaspect){iw=cw;ih=cw/aspect;ix=0;iy=(ch-ih)/2.0;}else{iw=ch*aspect;ih=ch;ix=(cw-iw)/2.0;iy=0;}
this._ctx.drawImage(this._cnv_poster,ix,iy,iw,ih);}else if(!this.playing){this.canvas_clear();}},canvas_clear:function(){var ctx;if(this.is_canvas&&(ctx=this.get_canvas_context())){var cw=this.width,ch=this.height;ctx.fillStyle=this.div_bg_clr;ctx.fillRect(0,0,this.width,this.height);}},setup_aspect_factors:function(){var video=this._vid;var cw=this.width,ch=this.height;if(!this.gotmetadata){this.v.width=cw;this.v.height=ch;return;}else if(this.pixelaspect&&this.aspect<=0){var w=video.videoWidth;var h=video.videoHeight;this.aspect=(w*this.pixelaspect)/h;}else if(this.aspectautoadj&&this.aspect<=0){var w=video.videoWidth;var h=video.videoHeight;if(w==720||w==704){if(h==480||h==576){this.aspect=4.0/3.0;}}
if(w==360||w==352){if(h==288||h==240){this.aspect=4.0/3.0;}}}
this.origaspect=cw/ch;var vw=video.videoWidth;var vh=video.videoHeight;var aspectW=((this.aspect<=0||Math.abs(this.aspect-this.width/this.height)<this.aspect_min)?(vw/vh):this.aspect)*vh/vw;vw*=aspectW;var va=vw/vh;var sw=this.width;var sh=this.height;var sa=sw/sh;if(vw<sw&&vh<sh){this.bar.unblur_doscale();}else{this.bar.blur_doscale();}
if(!this.doscale){if(vw>sw||vh>sh){if(sa>va){this._width=sh*va;this._height=sh;}else{this._width=sw;this._height=sw*vh/vw;}}else{this._width=vw;this._height=vh;}
this._x=(sw-this._width)/2;this._y=(sh-this._height)/2;}else{if(sa>va){this._width=sh*va;this._height=sh;this._x=(sw-this._width)/2;this._y=0;}else{this._width=sw;this._height=sw*vh/vw;this._x=0;this._y=(sh-this._height)/2;}}
if(!this.is_canvas){video.style.margin="0px";cw=Math.round(Math.max(0,this._x));ch=Math.round(Math.max(0,this._y));video.width=this._width;video.height=this._height;video.style.marginLeft=cw+"px";video.style.marginTop=ch+"px";video.style.marginRight=cw+"px";video.style.marginBottom=ch+"px";}else{this._cnv.width=sw;this._cnv.height=sh;}},put_canvas_frame:function(){if(!this.is_canvas||this.frame_timer||this._vid.paused||this._vid.ended){return;}
var that=this;this.frame_timer=setInterval(function(){that._ctx.drawImage(that._vid,that._x,that._y,that._width,that._height);},this.canvas_frame_timeout);},end_canvas_frame:function(){if(!this.frame_timer)return;clearInterval(this.frame_timer);this.frame_timer=false;},canvas_frame_timeout:16,put_canvas_frame_single:function(){var ctx;if(this.is_canvas&&(ctx=this.get_canvas_context())){ctx.drawImage(this._vid,this._x,this._y,this._width,this._height);}},setpad:function(pad){this.pad=pad;},get barheight(){return parseInt(this.ctlbar["barheight"]);},get v(){return this.is_canvas?this._cnv:this._vid;},get width(){return this.set_width==undefined?this.v.width:this.set_width;},set width(v){if(this.in_fullscreen)return;this.put_width(v);},put_width:function(v){this.hide_volctl();this.set_width=v;var t;t=document.getElementById(this.ctlbar["parent"]);t.style.width=v+"px";t=this.auxdiv;t.style.width=v+"px";this.setup_aspect_factors();this.put_canvas_poster();if(this.ctlbar.evhh5v_controlbar){this.ctlbar.evhh5v_controlbar.resize_bar(v,this.barheight);this.play_progress_update();}
t=this.bardiv;t.style.width=v+"px";t.style.left=this.pad+"px";},get height(){return this.set_height==undefined?this.v.height:this.set_height;},set height(v){if(this.in_fullscreen)return;this.put_height(v);},put_height:function(v){this.hide_volctl();var t;var diff=v-this.height;t=this.auxdiv;t.style.left="0px";t.style.top="0px";t.style.height=""+v+"px";this.set_height=v;var bh=this.barheight;t=document.getElementById(this.ctlbar["parent"]);t.style.height=bh+"px";this.setup_aspect_factors();this.put_canvas_poster();t=this.bardiv;t.style.height=bh+"px";this.bar_y+=diff;this.yshowpos+=diff;t.style.top=this.bar_y+"px";t.style.left=this.pad+"px";},get pixelWidth(){return this.v.pixelWidth;},set pixelWidth(v){this.v.pixelWidth=v;},get pixelHeight(){return this.v.pixelHeight;},set pixelHeight(v){this.v.pixelHeight=v;},fs_resize:function(){if(!this.in_fullscreen)return;var w=window.screen.width,h=window.screen.height;this.put_height(h);this.put_width(w);},callbk:function(evt){var that;if((that=this.evhh5v_controller)==undefined){return;}
var ename=evt.type;if(that.handlermap[ename]!=undefined){for(var i=0;i<that.handlermap[ename].length;i++){if(typeof that.handlermap[ename][i]=="function"){that.handlermap[ename][i].call(that,evt);}}}},add_evt:function(ename,callbk,bubool){var inst=false;if(this.handlermap[ename]==undefined){this.handlermap[ename]=[];inst=true;}
this.handlermap[ename].push(callbk);if(inst&&this._vid){this._vid.addEventListener(ename,this.callbk,bubool);}},addEventListener:function(ename,callbk,bubool){var t;if(typeof ename==="string"){t=[ename];}else if(ename instanceof Array){t=ename.slice(0);}
for(var i=0;i<t.length;i++){switch(t[i]){case"loadstart":case"progress":case"suspend":case"abort":case"error":case"emptied":case"stalled":case"loadedmetadata":case"loadeddata":case"canplay":case"canplaythrough":case"playing":case"waiting":case"seeking":case"seeked":case"ended":case"durationchange":case"timeupdate":case"play":case"pause":case"ratechange":case"resize":case"volumechange":case"click":case"touchstart":case"touchend":case"touchmove":case"touchenter":case"touchleave":case"touchcancel":case"mouseover":case"mouseout":case"mousemove":case"keyup":case"keydown":this.add_evt(t[i],callbk,bubool);break;default:console.log('evhh5v_controller: unexpected event added: "'+ename+'"');}}},install_handlers:function(newvid){var newv=false;if(newvid===true){newv=true;this.handlermap={};}
var wait_ev=["waiting"];if(/Chrom(e|ium)\/([0-2][0-9]|3[0-2])\./i.test(navigator["userAgent"])){wait_ev.push("seeking");}
this.addEventListener(wait_ev,function(e){this.show_wait();console.log("WAIT SPINNER START: "+e.type);},false);this.addEventListener(["seeked","canplaythrough","playing","loadeddata","ended"],function(e){this.hide_wait();console.log("WAIT SPINNER STOP: "+e.type);},false);this.addEventListener("play",function(e){console.log("Event: "+e.type);this.get_canvas_context();this.canvas_clear();this.has_been_played=true;this.stop_forced=false;this.playing=true;this.bar.hide_inibut();this.put_canvas_frame();this.bar.show_pauseico();this.bar.stopbtn_enab();this.showhideBar(this.doshowbar=false);},false);this.addEventListener("pause",function(e){this.end_canvas_frame();this.playing=false;this.bar.show_playico();this.bar.stopbtn_enab();this.hide_wait();},false);this.addEventListener("playing",function(e){this.playing=true;this.bar.show_pauseico();this.bar.stopbtn_enab();},false);this.addEventListener("suspend",function(e){if(!this.susptimer){var that=this.bar;this.susptimer=setTimeout(function(){that.show_dl_inactive();},3000);}},false);this.addEventListener("progress",function(e){if(this.susptimer){clearTimeout(this.susptimer);this.susptimer=false;var that=this.bar;this.susptimer=setTimeout(function(){that.show_dl_inactive();},3000);}
this.bar.show_dl_active();},false);this.addEventListener(["loadedmetadata","loadeddata","emptied"],function(e){this.bar.show_dl_inactive();},false);this.addEventListener(["loadedmetadata","resize"],function(e){if(e.type==="loadedmetadata"){this.on_metadata();this.gotmetadata=true;}else if(e.type==="resize"){console.log("Got RESIZE: w == "+
this._vid.videoWidth+", h == "+
this._vid.videoHeight);}
this.setup_aspect_factors();var h=this.height,w=this.width;this.height=h;this.width=w;},false);this.addEventListener(["volumechange","loadedmetadata","loadeddata","loadstart","playing"],function(e){var v=this._vid;if(v.volume!==undefined){var pct=Math.max(0,Math.min(1,v.volume));this.bar.scale_volctl(pct);}else{this.bar.scale_volctl(1);}},false);this.addEventListener(["ended","error","abort"],function(e){if(true||e.type!=="error"||this._vid.error){this.hide_wait();}
if(e.type==="error"&&!this._vid.error){console.log("DBG event error : video.error === "+this._vid.error);return;}else if(e.type!=="ended"){var t=this._vid.error;if(!t){console.log("DBG error||abort: .error === "+t);return;}
console.log("DBG error||abort: .error.code === "+t.code);try{switch(t.code){case MediaError.MEDIA_ERR_NETWORK:alert("A network error stopped the media fetch; "
+"try again when the network is working");case MediaError.MEDIA_ERR_ABORTED:var tv=this;setTimeout(function(){tv.stop();},256);return;case MediaError.MEDIA_ERR_DECODE:alert("A media decoding error occured. "+
"Contact the web browser vendor or "+
"the server administrator");break;case MediaError.MEDIA_ERR_SRC_NOT_SUPPORTED:alert("The current media is not supported by "+
"the browser's media player");break;default:alert("An unknown media player error occurred "+
"with error code value "+t.code);}}catch(ex){}}else if(e.type==="ended"){if(!this._vid.paused){this.pause();}}
this.end_canvas_frame();this.playing=false;this.bar.stopbtn_disab();this.bar.show_playico();this.bar.progress_pl(1);this.bar.show_dl_inactive();},false);var msevt=["mouseover","mouseout","mousemove","click","touchstart","touchend","touchmove","touchenter","touchleave","touchcancel"];this.addEventListener(msevt,function(e){var te=!(e.changedTouches===undefined);switch(e.type){case"mouseover":case"touchenter":break;case"mouseout":case"touchleave":break;case"mousemove":case"touchmove":e.stopPropagation();if(this.webkit_mousebug1){return;}
var co;if(te){e.preventDefault();co=this.mouse_coords(e.changedTouches[0]);}else{co=this.mouse_coords(e);}
var x=co["x"],y=co["y"];var bwid=this.barshowmargin;var w=this.width-bwid;var h=this.height-bwid;if(x>bwid&&y>bwid&&x<w&&y<h){if(this.doshowbar==false){this.showhideBar(this.doshowbar=true);}}else{if(this.doshowbar==true){this.showhideBar(this.doshowbar=false);}}
this.mouse_show();this.ptrtick=0;break;case"click":e.stopPropagation();this.playpause();break;case"dblclick":break;default:console.log("GOT MOUSE EVENT: "+e.type);}},false);var kbevt=["keyup","keydown"];this.addEventListener(kbevt,function(e){e.stopPropagation();switch(e.type){case"keydown":this.curkey=e.keyCode;break;case"keyup":if(this.curkey==32){this.playpause();}else if(this.curkey==81||this.curkey==113){this.stop();}else if(this.curkey==70||this.curkey==102){this.fullscreen();}else if(this.curkey==71||this.curkey==103){if(this.dbg_key===undefined){this.dbg_key=false;}
this.dbg_key=!this.dbg_key;}else if(this.curkey==65||this.curkey==97){if(this.saved_aspect===undefined){this.saved_aspect=this.aspect;}
this.aspect=this.aspect?0:this.saved_aspect;}else if(this.curkey==86||this.curkey==118){}else if(this.curkey==60||this.curkey==62){}else if(this.curkey==83||this.curkey==115){}
this.curkey=null;break;}},false);if(!newv){var that=this;var o=this.is_canvas?this._cnv:this.auxdiv;var eva=msevt.concat(kbevt);for(var s in eva){o.addEventListener(eva[s],function(e){that.callbk.call(that._vid,e);},false);}
this.mk_state_timer();}},mk_state_timer:function(){if(this.statetimer){return;}
var that=this;this.statetimer=setInterval(function(){that.do_state_timer();},this.tickinterval);},rm_state_timer:function(){if(!this.statetimer){return;}
clearInterval(this.statetimer);this.statetimer=false;},do_state_timer:function(){if(this.ntick++==2147483647){this.ntick=0;}
if(this.webkit_mousebug1)
this.webkit_mousebug1--;if(++this.ptrtick>=this.ptrtickmax){this.webkit_mousebug1=parseInt(this.ptrtickmax/10);this.mouse_hide();if(this.doshowbartime){this.showhideBar(this.doshowbar=false);}
this.ptrtick=0;}
var intrvl2=this.ntick&1;if(intrvl2&&!(this._vid.paused||this._vid.ended)){this.play_progress_update();}
if(this.yshowpos>this.bar_y){this.bar_y=Math.min(this.bar_y+this.barshowincr,this.yshowpos);this.set_bar_y(this.bar_y);if(this.yshowpos==this.bar_y){this.hide_volctl();}}else if(this.yshowpos<this.bar_y){this.bar_y=Math.max(this.bar_y-this.barshowincr,this.yshowpos);this.set_bar_y(this.bar_y);}},play_progress_update:function(){var t;if((t=this._vid.currentTime)==undefined||!isFinite(t))return;var d;if((d=this._vid.duration)==undefined||!isFinite(d)||d<=0)return;this.bar.progress_pl(t/d);return;},mouse_hide:function(){if(!this.mouse_hidden){this.mouse_hidden=true;this.v.setAttribute("class",this.mouse_hide_class);this.auxdiv.setAttribute("class",this.auxdivclass+" "+this.mouse_hide_class);this.v.style.cursor="none";this.auxdiv.style.cursor="none";}},mouse_show:function(){if(this.mouse_hidden){this.mouse_hidden=false;this.v.setAttribute("class",this.mouse_show_class);this.auxdiv.setAttribute("class",this.auxdivclass);this.v.style.cursor="default";this.auxdiv.style.cursor="default";}},mouse_coords:function(evt){var r=this.auxdiv.getBoundingClientRect();var x=evt.clientX-r.left,y=evt.clientY-r.top;return{"x":Math.round(x),"y":Math.round(y)};},showhideBar:function(bshow){var h=this.barheight;var show=this.height-h-this.barpadding;var hide=show+h+this.barpadding*2;var p=bshow?show:hide;if(this.disablebar){this.yshowpos=hide;this.set_bar_y(hide);this.hide_volctl();}else if(bshow&&this.bar_y>=p){this.yshowpos=p;}else if(!bshow&&this.bar_y<=p){this.yshowpos=p;}},set_bar_y:function(y){var t=document.getElementById(this.ctlbar["ctlbardiv"]);t.style.top=y+"px";},prog_pl_click_cb:function(dat){var t;if((t=this._vid.currentTime)==undefined||!isFinite(t))
return;var d;if((d=this._vid.duration)==undefined||!isFinite(d)||d<=0)
return;if(false&&this._vid.paused||this._vid.ended)
this.play();var cx=dat[0].clientX;var cw=dat[1];t=d*(cx/cw);this._vid.currentTime=t;this.bar.progress_pl(t/d);if(!this.playing){this.put_canvas_frame_single();}},play:function(){this._vid.play();},pause:function(){this._vid.pause();},playpause:function(){var video=this._vid;if(video.ended){video.currentTime=0;this.play();}else if(video.paused){this.play();}else{this.pause();}},stop:function(){this.stop_forced=true;this.hide_wait();if(true){this._vid.pause();var tv=document.createElement('video');var att=["poster","loop","width","height","id","class","name"];while(att.length){var tn=att.shift();var ta;if(!(ta=this._vid.getAttribute(tn)))continue;tv.setAttribute(tn,ta);}
tv.setAttribute("preload","none");while(this._vid.hasChildNodes()){var tn=this._vid.firstChild.cloneNode(true);tv.appendChild(tn);this._vid.removeChild(this._vid.firstChild);}
this._vid.src=null;this._vid.removeAttribute("src");try{this._vid.currentSrc=null;}catch(e){}
this._vid.load();if(!this.is_canvas){this._vid.parentNode.replaceChild(tv,this._vid);}
try{delete this._vid;}catch(e){}
this._vid=tv;this._vid.evhh5v_controller=this;this.setup_aspect_factors();this.install_handlers(true);}
this.gotmetadata=this.playing=false;this.put_canvas_poster();this.bar.show_playico();this.bar.progress_pl(1);var that=this;setTimeout(function(){that.bar.stopbtn_disab();},256);},do_scale:function(){this.doscale=!this.doscale;this.setup_aspect_factors();this.put_canvas_frame_single();if(this.doscale){this.bar.show_scalein();}else{this.bar.show_scaleout();}},fullscreen:function(){if(!evhh5v_fullscreen.capable()){this.bar.blur_fullscreen();alert("As it turns out, full screen mode is not available. Sigh.");return;}
var p=this.auxdiv;try{var el=evhh5v_fullscreen.element();if(el==undefined){this.fs_dimstore=[this.height,this.width];var t=this;this.orig_fs_change_func=evhh5v_fullscreen.handle_change(function(evt){if(evhh5v_fullscreen.element()==p){t.in_fullscreen=true;t.fs_resize();t.bar.show_fullscreenin();return;}
t.in_fullscreen=false;t.height=t.fs_dimstore[0];t.width=t.fs_dimstore[1];evhh5v_fullscreen.handle_change(t.orig_fs_change_func);evhh5v_fullscreen.handle_error(t.orig_fs_error_func);t.orig_fs_change_func=null;t.orig_fs_error_func=null;t.bar.show_fullscreenout();});this.orig_fs_error_func=evhh5v_fullscreen.handle_error(function(evt){evhh5v_fullscreen.handle_change(t.orig_fs_change_func);evhh5v_fullscreen.handle_error(t.orig_fs_error_func);t.orig_fs_change_func=null;t.orig_fs_error_func=null;alert("Full screen mode failed for an unknown reason.");});evhh5v_fullscreen.request(p);}else if(el==p){evhh5v_fullscreen.exit();}}catch(ex){alert(ex.name+": '"+ex.message+"'");}},togglevolctl:function(){if(!this.volctl_showing){this.show_volctl();}else{this.hide_volctl();}},show_volctl:function(bot){if(!this.volctl_showing){if(bot==undefined)
bot=this.height-this.barheight-3;this.volctl_showing=true;this.bar.show_volctl(bot,this.width);}},hide_volctl:function(){if(this.volctl_showing===true){this.volctl_showing=false;this.bar.hide_volctl();}},bar_bg_click:function(){this.hide_volctl();if(false){if(!this.wait_showing){this.show_wait();}else{this.hide_wait();}}},show_wait_ok:function(){if(this.chrome_show_wait_bad===undefined){this.chrome_show_wait_bad=this.params['chromium_force_show_wait']?false:/Chrom(e|ium)\/([4-9][0-9]|3[3-9])\./i.test(navigator["userAgent"]);}
if(this.chrome_show_wait_bad){return false;}
if(this.wait_showing||this.stop_forced||!this.has_been_played){return false;}
return true;},show_wait:function(){if(this.show_wait_ok()){this.wait_showing=true;var that=this;this.show_wait_handle=setTimeout(function(){if(that.show_wait_handle!==false){that.bar.show_waitanim(that.width/2,that.height/2);}
that.show_wait_handle=false;},125);}},hide_wait:function(){var that=this;setTimeout(function(){if(that.wait_showing!==undefined&&that.wait_showing){if(that.show_wait_handle){clearTimeout(that.show_wait_handle);that.show_wait_handle=false;}
that.bar.hide_waitanim();that.wait_showing=false;}},100);},show_wait_now:function(){if(!this.wait_showing&&!this.stop_forced&&this.has_been_played){this.wait_showing=true;this.bar.show_waitanim(this.width/2,this.height/2);}},hide_wait_now:function(){if(this.wait_showing!==undefined&&this.wait_showing){this.bar.hide_waitanim();this.wait_showing=false;}},button_click:function(obj){switch(obj.id){case"playpause":case"inibut":this.playpause();break;case"stop":this.stop();break;case"doscale":this.do_scale();break;case"fullscreen":this.fullscreen();break;case"volume":this.togglevolctl();break;case"bgrect":this.bar_bg_click();break;}},protoplasmaticism:true};var evhh5v_ctlbarmap={};var evhh5v_ctlbutmap={};var evhh5v_ctlvolmap={};function evhh5v_put_ctlbarmap(parms){if(!parms["parentdiv"]||!parms["role"]){console.log("evhh5v_put_ctlbarmap was passed a foul object: no parentdiv or role: "+parms);return;}
var map;switch(parms["role"]){case"1st":map=evhh5v_ctlbutmap;break;case"vol":map=evhh5v_ctlvolmap;break;case"bar":default:map=evhh5v_ctlbarmap;break;}
map[parms["parentdiv"]]=parms;map[parms["parentdiv"]]["loaded"]=false;};function evhh5v_ctlbarload(obj,divid){var p=evhh5v_ctlbarmap[divid];p.evhh5v_controlbar=new evhh5v_controlbar(p);p.evhh5v_controlbar.resize_bar(p["barwidth"],p["barheight"]);p["loaded"]=true;};function evhh5v_ctlbutload(obj,divid){evhh5v_ctlbutmap[divid]["loaded"]=true;}
function evhh5v_ctlvolload(obj,divid){evhh5v_ctlvolmap[divid]["loaded"]=true;}
function evhh5v_do_dbg_obj(o){}